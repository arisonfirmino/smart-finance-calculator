generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id     String  @id @default(uuid())
  name   String
  email  String  @unique
  avatar String?

  balance        Decimal       @default(0.00) @db.Decimal(10, 2)
  total_income   Decimal       @default(0.00) @db.Decimal(10, 2)
  total_expenses Decimal       @default(0.00) @db.Decimal(10, 2)
  banks          Bank[]
  transactions   Transaction[]

  created_at DateTime @default(now())
  updated_at DateTime

  @@map("users")
}

model Bank {
  id               String        @id @default(uuid())
  name             String
  icon             String
  starting_balance Decimal       @db.Decimal(10, 2)
  current_balance  Decimal       @db.Decimal(10, 2)
  transactions     Transaction[]

  created_at DateTime @default(now())
  updated_at DateTime

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  @@map("banks")
}

model Transaction {
  id         String   @id @default(uuid())
  title      String
  type       String
  amount     Decimal  @db.Decimal(10, 2)
  date       DateTime
  created_at DateTime @default(now())

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId String

  bank   Bank   @relation(fields: [bankId], references: [id], onDelete: Cascade)
  bankId String

  @@map("transactions")
}
